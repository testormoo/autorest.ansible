@using AutoRest.Ansible.vanilla.Templates
@using System.Linq
@using AutoRest.Core.Model
@using AutoRest.Core.Utilities
@using AutoRest.Ansible
@using AutoRest.Ansible.Model
@inherits AutoRest.Ansible.PythonTemplate<AutoRest.Ansible.Model.CodeModelAnsibleMap>

@foreach (var line in Model.ModuleTestCreate)
{
@:@(line)
}
  register: output
- name: Assert the resource instance is well created
  assert:
    that:
      - output.changed
      - output.state.@(Model.AssertStateVariable) == '@(Model.AssertStateExpectedValue)'
@EmptyLine
@foreach (var line in Model.ModuleTestUpdate)
{
@:@(line)
}
  register: output
- name: Assert the state has not changed
  assert:
    that:
      - output.changed == false
      - output.state.@(Model.AssertStateVariable) == '@(Model.AssertStateExpectedValue)'
@EmptyLine
@foreach (var line in Model.ModuleTestDelete)
{
@:@(line)
}
    state: absent
  register: output
- name: Assert the state has changed
  assert:
    that:
      - output.changed
